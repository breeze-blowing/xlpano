(()=>{"use strict";var e={840:(e,t,n)=>{e.exports=n.p+"7ee9875e4097b824f5c5.jpg"},55:(e,t,n)=>{e.exports=n.p+"682db2c570c7ae8b9754.jpg"},96:(e,t,n)=>{e.exports=n.p+"792571d0fe3a6938346e.jpg"},389:(e,t,n)=>{e.exports=n.p+"a23a73205509534909b4.jpg"},524:(e,t,n)=>{e.exports=n.p+"543a01d5b27e422483ba.jpg"},196:(e,t,n)=>{e.exports=n.p+"aa9f8a6c95d9fdf9e7ff.jpg"},637:(e,t,n)=>{e.exports=n.p+"e391c302c4386d29790d.jpg"},932:(e,t,n)=>{e.exports=n.p+"530926e179ca4c5701ed.jpg"},738:(e,t,n)=>{e.exports=n.p+"6775231e37716ee83f54.jpg"},878:(e,t,n)=>{e.exports=n.p+"f78b4464755b3860a572.jpg"},54:(e,t,n)=>{e.exports=n.p+"e3c9b1293a5f6dc5352a.jpg"},108:(e,t,n)=>{e.exports=n.p+"e07ae42b6d6f1a21ebc6.jpg"},340:(e,t,n)=>{e.exports=n.p+"edbccb21b0a6acc34999.gif"},623:(e,t,n)=>{e.exports=n.p+"e8f6211f97abeaa7e6a4.jpeg"},19:(e,t,n)=>{e.exports=n.p+"7a75edf22c9562ecb6ff.jpeg"},28:(e,t,n)=>{e.exports=n.p+"abdfdeba881b6b6b8e38.jpeg"},624:(e,t,n)=>{e.exports=n.p+"92060237ab1135a66ab9.jpeg"},347:(e,t,n)=>{e.exports=n.p+"3ac365b1ac27dc52b554.jpeg"},113:(e,t,n)=>{e.exports=n.p+"97aef328ebc3c7b86fe9.jpeg"},137:(e,t,n)=>{e.exports=n.p+"6a25eb008b44bc6687e6.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e;e=function(e,t){for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null,o=0;o<n.length;++o){try{r=e.getContext(n[o],t)}catch(e){}if(r)break}return r};const t=function(t,n,r){r=r||function(e){var t=document.getElementsByTagName("body")[0];if(t){var n=window.WebGLRenderingContext?'It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org">Click here for more information.</a>':'This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>';e&&(n+="<br/><br/>Status: "+e),t.innerHTML=function(e){return'<div style="margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;">'+e+"</div>"}(n)}},t.addEventListener&&t.addEventListener("webglcontextcreationerror",(function(e){r(e.statusMessage)}),!1);var o=e(t,n);return o||(window.WebGLRenderingContext,r("")),o},r=function(){var e={enable:{0:!0},disable:{0:!0},getParameter:{0:!0},drawArrays:{0:!0},drawElements:{0:!0,2:!0},createShader:{0:!0},getShaderParameter:{1:!0},getProgramParameter:{1:!0},getVertexAttrib:{1:!0},vertexAttribPointer:{2:!0},bindTexture:{0:!0},activeTexture:{0:!0},getTexParameter:{0:!0,1:!0},texParameterf:{0:!0,1:!0},texParameteri:{0:!0,1:!0,2:!0},texImage2D:{0:!0,2:!0,6:!0,7:!0},texSubImage2D:{0:!0,6:!0,7:!0},copyTexImage2D:{0:!0,2:!0},copyTexSubImage2D:{0:!0},generateMipmap:{0:!0},bindBuffer:{0:!0},bufferData:{0:!0,2:!0},bufferSubData:{0:!0},getBufferParameter:{0:!0,1:!0},pixelStorei:{0:!0,1:!0},readPixels:{4:!0,5:!0},bindRenderbuffer:{0:!0},bindFramebuffer:{0:!0},checkFramebufferStatus:{0:!0},framebufferRenderbuffer:{0:!0,1:!0,2:!0},framebufferTexture2D:{0:!0,1:!0,2:!0},getFramebufferAttachmentParameter:{0:!0,1:!0,2:!0},getRenderbufferParameter:{0:!0,1:!0},renderbufferStorage:{0:!0,1:!0},clear:{0:!0},depthFunc:{0:!0},blendFunc:{0:!0,1:!0},blendFuncSeparate:{0:!0,1:!0,2:!0,3:!0},blendEquation:{0:!0},blendEquationSeparate:{0:!0,1:!0},stencilFunc:{0:!0},stencilFuncSeparate:{0:!0,1:!0},stencilMaskSeparate:{0:!0},stencilOp:{0:!0,1:!0,2:!0},stencilOpSeparate:{0:!0,1:!0,2:!0,3:!0},cullFace:{0:!0},frontFace:{0:!0}},t=null;function n(e){if(null==t)for(var n in t={},e)"number"==typeof e[n]&&(t[e[n]]=n)}function r(){if(null==t)throw"WebGLDebugUtils.init(ctx) not called"}function o(e){r();var n=t[e];return void 0!==n?n:"*UNKNOWN WebGL ENUM (0x"+e.toString(16)+")"}function i(t,n,r){var i=e[t];return void 0!==i&&i[n]?o(r):r.toString()}function a(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var r=0;r<t;++r)e.disableVertexAttribArray(r),e.vertexAttribPointer(r,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(r,0);e.deleteBuffer(n);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(r=0;r<o;++r)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}return{init:n,mightBeEnum:function(e){return r(),void 0!==t[e]},glEnumToString:o,glFunctionArgToString:i,makeDebugContext:function(e,t){n(e),t=t||function(e,t,n){for(var r,a="",s=0;s<n.length;++s)a+=(0==s?"":", ")+i(t,s,n[s]);r="WebGL error "+o(e)+" in "+t+"("+a+")",window.console&&window.console.log&&window.console.log(r)};var r={};function a(e,n){return function(){var o=e[n].apply(e,arguments),i=e.getError();return 0!=i&&(r[i]=!0,t(i,n,arguments)),o}}var s={};for(var c in e)"function"==typeof e[c]?s[c]=a(e,c):s[c]=e[c];return s.getError=function(){for(var t in r)if(r[t])return r[t]=!1,t;return e.NO_ERROR},s},makeLostContextSimulatingContext:function(e){var t={},n=1,r=!1,o=[],i=void 0,s=void 0,c=void 0,u={};function f(e){for(var t=0;t<e.length;++t){var r=e[t];if((o=r)instanceof WebGLBuffer||o instanceof WebGLFramebuffer||o instanceof WebGLProgram||o instanceof WebGLRenderbuffer||o instanceof WebGLShader||o instanceof WebGLTexture)return r.__webglDebugContextLostId__==n}var o;return!0}function l(e,t){var n=e[t];return function(){if(!r){if(!f(arguments))return void(u[e.INVALID_OPERATION]=!0);var t=n.apply(e,arguments);return t}}}for(var h in e)"function"==typeof e[h]?t[h]=l(e,h):t[h]=e[h];function p(e){return{statusMessage:e}}t.loseContext=function(){if(!r){for(r=!0,++n;e.getError(););!function(){for(var e=Object.keys(u),t=0;t<e.length;++t)delete glErrorShdow_[e]}(),u[e.CONTEXT_LOST_WEBGL]=!0,setTimeout((function(){i&&i(p("context lost"))}),0)}},t.restoreContext=function(){if(r){if(!s)throw"You can not restore the context without a listener";setTimeout((function(){if(function(){for(var t=0;t<o.length;++t){var n=o[t];n instanceof WebGLBuffer?e.deleteBuffer(n):n instanceof WebctxFramebuffer?e.deleteFramebuffer(n):n instanceof WebctxProgram?e.deleteProgram(n):n instanceof WebctxRenderbuffer?e.deleteRenderbuffer(n):n instanceof WebctxShader?e.deleteShader(n):n instanceof WebctxTexture&&e.deleteTexture(n)}}(),a(e),r=!1,s){var t=s;s=c,c=void 0,t(p("context restored"))}}),0)}},t.getError=function(){if(!r)for(;t=e.getError();)u[t]=!0;for(var t in u)if(u[t])return delete u[t],t;return e.NO_ERROR};for(var d=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],g=0;g<d.length;++g)t[y=d[g]]=function(t){return function(){if(r)return null;var i=t.apply(e,arguments);return i.__webglDebugContextLostId__=n,o.push(i),i}}(e[y]);var v=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(g=0;g<v.length;++g)t[y=v[g]]=function(t){return function(){return r?null:t.apply(e,arguments)}}(t[y]);var m=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(g=0;g<m.length;++g){var y;t[y=m[g]]=function(t){return function(){return!r&&t.apply(e,arguments)}}(t[y])}function E(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}return t.checkFramebufferStatus=function(t){return function(){return r?e.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(t.checkFramebufferStatus),t.getAttribLocation=function(t){return function(){return r?-1:t.apply(e,arguments)}}(t.getAttribLocation),t.getVertexAttribOffset=function(t){return function(){return r?0:t.apply(e,arguments)}}(t.getVertexAttribOffset),t.isContextLost=function(){return r},t.registerOnContextLostListener=function(e){i=E(e)},t.registerOnContextRestoredListener=function(e){r?c=E(e):s=E(e)},t},resetToInitialState:a}}(),o=r;function i(e,t){e.useProgram(t),e.program=t}function a(e,t,n){var r=s(e,e.VERTEX_SHADER,t),o=s(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("创建程序对象失败");if(e.attachShader(i,r),e.attachShader(i,o),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw e.deleteProgram(i),e.deleteShader(o),e.deleteShader(r),new Error("链接程序对象失败："+e.getProgramInfoLog(i));return i}function s(e,t,n){var r=e.createShader(t);if(null===r)throw new Error("创建 "+t+" 着色器对象失败");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw e.deleteShader(r),new Error("编译着"+t+"色器失败："+e.getShaderInfoLog(r));return r}function c(e,t,n,r,o){var i=e.createBuffer();if(!i)throw new Error("创建缓冲区对象失败");e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var a=e.getAttribLocation(e.program,o);if(a<0)throw new Error("获取 "+o+" 地址失败");e.vertexAttribPointer(a,n,r,!1,0,0),e.enableVertexAttribArray(a)}function u(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.src=e}))}var f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h={};function p(e){return Promise.all(e.map((function(e){return u(e)}))).then((function(t){e.forEach((function(e,n){h[e]=t[n]}))}))}function d(e){return e.textures instanceof Array?e.textures.filter((function(e){return"string"==typeof e})):"string"==typeof e.textures?[e.textures]:[]}var g=[-86,86],v=function(){function e(t){var n;if(t){for(var r=new Float32Array(e.size),o=0;o<e.size;o++)r[o]=t.elements[o];n=r}else n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.elements=n}return e.prototype.setIdentity=function(){var e=this.elements;return e[0]=1,e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=1,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this},e.prototype.set=function(t){if(this===t||this.elements===t.elements)return this;for(var n=new Float32Array(e.size),r=0;r<e.size;r++)n[r]=t.elements[r];return this},e.prototype.multiply=function(e){var t,n,r,o,i,a,s,c;if(n=this.elements,r=this.elements,n===(o=e.elements))for(o=new Float32Array(16),t=0;t<16;++t)o[t]=n[t];for(t=0;t<4;t++)i=r[t],a=r[t+4],s=r[t+8],c=r[t+12],n[t]=i*o[0]+a*o[1]+s*o[2]+c*o[3],n[t+4]=i*o[4]+a*o[5]+s*o[6]+c*o[7],n[t+8]=i*o[8]+a*o[9]+s*o[10]+c*o[11],n[t+12]=i*o[12]+a*o[13]+s*o[14]+c*o[15];return this},e.prototype.transpose=function(){var e,t;return t=(e=this.elements)[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},e.prototype.setInverseOf=function(e){var t,n,r,o,i;if(n=e.elements,r=this.elements,(o=new Float32Array(16))[0]=n[5]*n[10]*n[15]-n[5]*n[11]*n[14]-n[9]*n[6]*n[15]+n[9]*n[7]*n[14]+n[13]*n[6]*n[11]-n[13]*n[7]*n[10],o[4]=-n[4]*n[10]*n[15]+n[4]*n[11]*n[14]+n[8]*n[6]*n[15]-n[8]*n[7]*n[14]-n[12]*n[6]*n[11]+n[12]*n[7]*n[10],o[8]=n[4]*n[9]*n[15]-n[4]*n[11]*n[13]-n[8]*n[5]*n[15]+n[8]*n[7]*n[13]+n[12]*n[5]*n[11]-n[12]*n[7]*n[9],o[12]=-n[4]*n[9]*n[14]+n[4]*n[10]*n[13]+n[8]*n[5]*n[14]-n[8]*n[6]*n[13]-n[12]*n[5]*n[10]+n[12]*n[6]*n[9],o[1]=-n[1]*n[10]*n[15]+n[1]*n[11]*n[14]+n[9]*n[2]*n[15]-n[9]*n[3]*n[14]-n[13]*n[2]*n[11]+n[13]*n[3]*n[10],o[5]=n[0]*n[10]*n[15]-n[0]*n[11]*n[14]-n[8]*n[2]*n[15]+n[8]*n[3]*n[14]+n[12]*n[2]*n[11]-n[12]*n[3]*n[10],o[9]=-n[0]*n[9]*n[15]+n[0]*n[11]*n[13]+n[8]*n[1]*n[15]-n[8]*n[3]*n[13]-n[12]*n[1]*n[11]+n[12]*n[3]*n[9],o[13]=n[0]*n[9]*n[14]-n[0]*n[10]*n[13]-n[8]*n[1]*n[14]+n[8]*n[2]*n[13]+n[12]*n[1]*n[10]-n[12]*n[2]*n[9],o[2]=n[1]*n[6]*n[15]-n[1]*n[7]*n[14]-n[5]*n[2]*n[15]+n[5]*n[3]*n[14]+n[13]*n[2]*n[7]-n[13]*n[3]*n[6],o[6]=-n[0]*n[6]*n[15]+n[0]*n[7]*n[14]+n[4]*n[2]*n[15]-n[4]*n[3]*n[14]-n[12]*n[2]*n[7]+n[12]*n[3]*n[6],o[10]=n[0]*n[5]*n[15]-n[0]*n[7]*n[13]-n[4]*n[1]*n[15]+n[4]*n[3]*n[13]+n[12]*n[1]*n[7]-n[12]*n[3]*n[5],o[14]=-n[0]*n[5]*n[14]+n[0]*n[6]*n[13]+n[4]*n[1]*n[14]-n[4]*n[2]*n[13]-n[12]*n[1]*n[6]+n[12]*n[2]*n[5],o[3]=-n[1]*n[6]*n[11]+n[1]*n[7]*n[10]+n[5]*n[2]*n[11]-n[5]*n[3]*n[10]-n[9]*n[2]*n[7]+n[9]*n[3]*n[6],o[7]=n[0]*n[6]*n[11]-n[0]*n[7]*n[10]-n[4]*n[2]*n[11]+n[4]*n[3]*n[10]+n[8]*n[2]*n[7]-n[8]*n[3]*n[6],o[11]=-n[0]*n[5]*n[11]+n[0]*n[7]*n[9]+n[4]*n[1]*n[11]-n[4]*n[3]*n[9]-n[8]*n[1]*n[7]+n[8]*n[3]*n[5],o[15]=n[0]*n[5]*n[10]-n[0]*n[6]*n[9]-n[4]*n[1]*n[10]+n[4]*n[2]*n[9]+n[8]*n[1]*n[6]-n[8]*n[2]*n[5],0==(i=n[0]*o[0]+n[1]*o[4]+n[2]*o[8]+n[3]*o[12]))return this;for(i=1/i,t=0;t<16;t++)r[t]=o[t]*i;return this},e.prototype.invert=function(){return this.setInverseOf(this)},e.prototype.setOrtho=function(e,t,n,r,o,i){var a,s,c,u;if(e===t||n===r||o===i)throw"null frustum";return s=1/(t-e),c=1/(r-n),u=1/(i-o),(a=this.elements)[0]=2*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2*u,a[11]=0,a[12]=-(t+e)*s,a[13]=-(r+n)*c,a[14]=-(i+o)*u,a[15]=1,this},e.prototype.ortho=function(t,n,r,o,i,a){return this.multiply((new e).setOrtho(t,n,r,o,i,a))},e.prototype.setPerspective=function(e,t,n,r){var o,i,a,s;if(n===r||0===t)throw"null frustum";if(n<=0)throw"near <= 0";if(r<=0)throw"far <= 0";if(e=Math.PI*e/180/2,0===(a=Math.sin(e)))throw"null frustum";return i=1/(r-n),s=Math.cos(e)/a,(o=this.elements)[0]=s/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-(r+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*n*r*i,o[15]=0,this},e.prototype.perspective=function(t,n,r,o){return this.multiply((new e).setPerspective(t,n,r,o))},e.prototype.setScale=function(e,t,n){var r=this.elements;return r[0]=e,r[4]=0,r[8]=0,r[12]=0,r[1]=0,r[5]=t,r[9]=0,r[13]=0,r[2]=0,r[6]=0,r[10]=n,r[14]=0,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this},e.prototype.scale=function(e,t,n){var r=this.elements;return r[0]*=e,r[4]*=t,r[8]*=n,r[1]*=e,r[5]*=t,r[9]*=n,r[2]*=e,r[6]*=t,r[10]*=n,r[3]*=e,r[7]*=t,r[11]*=n,this},e.prototype.setTranslate=function(e,t,n){var r=this.elements;return r[0]=1,r[4]=0,r[8]=0,r[12]=e,r[1]=0,r[5]=1,r[9]=0,r[13]=t,r[2]=0,r[6]=0,r[10]=1,r[14]=n,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this},e.prototype.translate=function(e,t,n){var r=this.elements;return r[12]+=r[0]*e+r[4]*t+r[8]*n,r[13]+=r[1]*e+r[5]*t+r[9]*n,r[14]+=r[2]*e+r[6]*t+r[10]*n,r[15]+=r[3]*e+r[7]*t+r[11]*n,this},e.prototype.setRotate=function(e,t,n,r){var o,i,a,s,c,u,f,l,h,p,d,g;return e=Math.PI*e/180,o=this.elements,i=Math.sin(e),a=Math.cos(e),0!==t&&0===n&&0===r?(t<0&&(i=-i),o[0]=1,o[4]=0,o[8]=0,o[12]=0,o[1]=0,o[5]=a,o[9]=-i,o[13]=0,o[2]=0,o[6]=i,o[10]=a,o[14]=0,o[3]=0,o[7]=0,o[11]=0,o[15]=1):0===t&&0!==n&&0===r?(n<0&&(i=-i),o[0]=a,o[4]=0,o[8]=i,o[12]=0,o[1]=0,o[5]=1,o[9]=0,o[13]=0,o[2]=-i,o[6]=0,o[10]=a,o[14]=0,o[3]=0,o[7]=0,o[11]=0,o[15]=1):0===t&&0===n&&0!==r?(r<0&&(i=-i),o[0]=a,o[4]=-i,o[8]=0,o[12]=0,o[1]=i,o[5]=a,o[9]=0,o[13]=0,o[2]=0,o[6]=0,o[10]=1,o[14]=0,o[3]=0,o[7]=0,o[11]=0,o[15]=1):(1!==(s=Math.sqrt(t*t+n*n+r*r))&&(t*=c=1/s,n*=c,r*=c),u=1-a,f=t*n,l=n*r,h=r*t,p=t*i,d=n*i,g=r*i,o[0]=t*t*u+a,o[1]=f*u+g,o[2]=h*u-d,o[3]=0,o[4]=f*u-g,o[5]=n*n*u+a,o[6]=l*u+p,o[7]=0,o[8]=h*u+d,o[9]=l*u-p,o[10]=r*r*u+a,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1),this},e.prototype.rotate=function(t,n,r,o){return this.multiply((new e).setRotate(t,n,r,o))},e.prototype.setLookAt=function(e,t,n,r,o,i,a,s,c){var u,f,l,h,p,d,g,v,m,y,E,b;return f=r-e,l=o-t,h=i-n,d=(l*=p=1/Math.sqrt(f*f+l*l+h*h))*c-(h*=p)*s,g=h*a-(f*=p)*c,v=f*s-l*a,y=(g*=m=1/Math.sqrt(d*d+g*g+v*v))*h-(v*=m)*l,E=v*f-(d*=m)*h,b=d*l-g*f,(u=this.elements)[0]=d,u[1]=y,u[2]=-f,u[3]=0,u[4]=g,u[5]=E,u[6]=-l,u[7]=0,u[8]=v,u[9]=b,u[10]=-h,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this.translate(-e,-t,-n)},e.prototype.lookAt=function(t,n,r,o,i,a,s,c,u){return this.multiply((new e).setLookAt(t,n,r,o,i,a,s,c,u))},e.size=16,e}();const m=v;function y(e){var t=e%360;return t<0&&(t+=360),t}function E(e){return e*(2*Math.PI/360)}function b(e){return e/(2*Math.PI/360)}const x=function(){function e(){this.pitch=0,this.yaw=0,this.eye={position:{x:0,y:0,z:0},target:{x:0,y:0,z:-1},up:{x:0,y:1,z:0}},this.yRange=g,this.fovy=60,this.dragging=!1,this.dragStartPoint={x:0,y:0},this.angling=!1,this.fovying=!1,this.angleChangeCallbacks=[],this.hotSpots=[]}return e.prototype.getPitchRange=function(){var e=this.fovy/2;return[this.yRange[0]+e,this.yRange[1]-e]},e.prototype.setMvpMatrix=function(){var e=this.pano.gl,t=this.eye,n=t.position,r=n.x,o=n.y,i=n.z,a=t.target,s=a.x,c=a.y,u=a.z,f=t.up,l=f.x,h=f.y,p=f.z,d=e.getUniformLocation(e.program,"u_MvpMatrix");if(!d)throw new Error("获取 mvp 矩阵地址失败");var g=this.pano.canvas,v=g.width,y=g.height,E=new m;E.setPerspective(this.fovy,v/y,.01,10),E.lookAt(r,o,i,s,c,u,l,h,p),E.rotate(-this.pitch,1,0,0),E.rotate(this.yaw,0,1,0),e.uniformMatrix4fv(d,!1,E.elements)},e.prototype.addListener=function(e,t){"angleChange"===e&&this.angleChangeCallbacks.push(t)},e.prototype.removeListener=function(e,t){"angleChange"===e&&(this.angleChangeCallbacks=this.angleChangeCallbacks.filter((function(e){return e!==t})))},e.prototype.removeAllListeners=function(){this.angleChangeCallbacks=[]},e.prototype.destroy=function(){this.hotSpots&&this.hotSpots.length&&this.hotSpots.forEach((function(e){return e.destroy()}))},e.prototype.getAngle=function(){return{pitch:this.pitch,yaw:this.yaw}},e.prototype.getFovy=function(){return this.fovy},e.prototype.renderHotSpots=function(e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=0),this.hotSpots&&this.hotSpots.length&&this.hotSpots.forEach((function(r){return r.render(-e,t,n.pano,n)}))},e.prototype.executeAngleChangeCallbacks=function(){var e=this;this.angleChangeCallbacks.forEach((function(t){return t({pitch:e.pitch,yaw:e.yaw})}))},e.prototype.beforeDrawElements=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.pano.gl;this.pitch+=e;var r=this.getPitchRange();this.pitch<r[0]&&(this.pitch=r[0]),this.pitch>r[1]&&(this.pitch=r[1]),this.yaw+=t,this.yaw=y(this.yaw),this.setMvpMatrix(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},e.prototype.addHotSpots=function(e){var t=this,n=function(e){e.pitch-=t.pitch,e.yaw-=t.yaw};e instanceof Array?(e.forEach((function(e){return n(e)})),this.hotSpots=this.hotSpots.concat(e)):(n(e),this.hotSpots.push(e))},e.prototype.draw=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.beforeDrawElements(e,t),this.drawModel(),this.renderHotSpots(e,t),this.executeAngleChangeCallbacks()},e.prototype.moveTo=function(e,t){var n,r=this.pano.canvas,o=this.dragStartPoint.x-e,i=this.dragStartPoint.y-t,a=this.getPitchRange();n=this.pitch<=a[0]&&i>=0||this.pitch>=a[1]&&i<=0?0:-b(Math.atan(i/(r.height/2)));var s=b(Math.atan(o/(r.width/2)));this.draw(1.5*n,1.5*s),this.dragStartPoint={x:e,y:t}},e.prototype.move=function(e,t,n){var r=this;void 0===n&&(n={});var o=n.animation,i=n.callback,a=n.duration,s=void 0===a?500:a;if(o){this.angling=!0;var c=e/s,u=t/s,f=Date.now(),l=f,h=function(){requestAnimationFrame((function(){var e=Date.now(),t=e-f;e<l+s?(r.draw(c*t,u*t),f=e,h()):(r.angling=!1,i&&i())}))};h()}else this.draw(e,t),i&&i()},e.prototype.setAngle=function(e,t){var n=e.pitch,r=e.yaw;this.move(n-this.pitch,r-this.yaw,t)},e.prototype.setFovy=function(e,t){var n=this;if(void 0===t&&(t={}),e<=0||e>=180)throw new Error("视角范围超出(0, 180)限制");var r=t.animation,o=t.callback,i=t.duration,a=void 0===i?500:i;if(r){this.fovying=!0;var s=(e-this.fovy)/a,c=Date.now(),u=c,f=function(){requestAnimationFrame((function(){var e=Date.now(),t=e-c;e<u+a?(n.fovy+=s*t,n.draw(),c=e,f()):(n.fovying=!1,o&&o())}))};f()}else this.fovy=e,this.draw(),o&&o()},e.prototype.onHotSpotClick=function(e){var t=this;this.move(e.pitch,e.yaw>180?-(360-e.yaw):e.yaw,{animation:!0,callback:function(){return t.pano.switchScene(e.target)}}),this.setFovy(this.fovy-6,{animation:!0,callback:function(){return t.fovy=60}})},e.prototype.eventBind=function(){var e=this,t=this.pano.canvas;t.onmousedown=function(n){e.dragging=!0,t.style.cursor="grabbing",e.dragStartPoint={x:n.offsetX,y:n.offsetY}},t.onmouseup=function(){e.dragging=!1,t.style.cursor="grab"},t.onmouseout=function(){e.dragging=!1,t.style.cursor="grab"},t.onmousemove=function(t){!e.dragging||e.angling||e.fovying||e.moveTo(t.offsetX,t.offsetY)},t.ontouchstart=function(n){var r=t.getBoundingClientRect(),o=r.top,i=r.left,a=n.changedTouches[0].clientX-i,s=n.changedTouches[0].clientY-o;e.dragStartPoint={x:a,y:s}},t.ontouchmove=function(n){var r=t.getBoundingClientRect(),o=r.top,i=r.left,a=n.changedTouches[0].clientX-i,s=n.changedTouches[0].clientY-o;e.angling||e.fovying||e.moveTo(a,s)}},e.prototype.drawModel=function(){},e.prototype.replaceTextures=function(e){},e.prototype.render=function(e){this.pano=e,this.eventBind()},e}();var w,T=(w=function(e,t){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},w(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(t,n){var r=e.call(this)||this;if(r.textures=[],r.textures=t,n){var o=n.pitch,i=n.yaw;o&&(r.pitch=o),i&&(r.yaw=i)}return r}return T(t,e),t.initTexture=function(e,t,n){var r=e.createTexture();if(!r)throw new Error("创建纹理对象失败");var o=e.TEXTURE0,i="f";switch(n){case 0:o=e.TEXTURE0,i="f";break;case 1:o=e.TEXTURE1,i="r";break;case 2:o=e.TEXTURE2,i="u";break;case 3:o=e.TEXTURE3,i="l";break;case 4:o=e.TEXTURE4,i="d";break;case 5:o=e.TEXTURE5,i="b"}e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.activeTexture(o),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var a=e.getUniformLocation(e.program,i+"_Sampler");if(!a)throw new Error("获取 "+a+" 地址失败");e.uniform1i(a,n)},t.getUFaceLocation=function(e){if(!t.u_Face){var n=e.getUniformLocation(e.program,"u_Face");if(!n)throw new Error("获取 u_Face 地址失败");t.u_Face=n}return t.u_Face},t.prototype.drawModel=function(){var e=this;t.allFacesIndices.forEach((function(t,n){e.renderFace(t,n)}))},t.prototype.loadTextures=function(){var e=this.textures,t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=[e[5],n,r,o,i,t],s=[];return a.forEach((function(e,t){"string"==typeof e&&s.push({src:e,index:t})})),function(e){return f(this,void 0,void 0,(function(){var t,n,r,o,i,a;return l(this,(function(s){switch(s.label){case 0:t=[],n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],h[o]?(t.push(h[o]),[3,4]):[3,2]):[3,5];case 2:return a=(i=t).push,[4,u(o)];case 3:a.apply(i,[s.sent()]),s.label=4;case 4:return n++,[3,1];case 5:return[2,t]}}))}))}(s.map((function(e){return e.src}))).then((function(e){return a.map((function(t){return"string"==typeof t?e.shift():t}))}))},t.prototype.renderFace=function(e,n){var r=this.pano.gl,o=r.createBuffer();if(!o)throw new Error("创建索引缓冲区对象失败");r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW),r.uniform1i(t.getUFaceLocation(r),n),r.drawElements(r.TRIANGLES,e.length,r.UNSIGNED_BYTE,0)},t.prototype.replaceTextures=function(e){this.textures=e,this.render(this.pano)},t.prototype.render=function(n){var r=this;e.prototype.render.call(this,n);var o=this.pano.gl;c(o,t.vertices,3,o.FLOAT,"a_Position"),c(o,t.texs,2,o.FLOAT,"a_TexCoord"),this.loadTextures().then((function(e){e.forEach((function(e,n){n<=5&&t.initTexture(o,e,n)})),r.draw()}))},t.vertices=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),t.texs=new Float32Array([0,1,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,0,0,0,0,1,1,1]),t.allFacesIndices=[new Uint8Array([0,1,2,0,2,3]),new Uint8Array([4,5,6,4,6,7]),new Uint8Array([8,9,10,8,10,11]),new Uint8Array([12,13,14,12,14,15]),new Uint8Array([16,17,18,16,18,19]),new Uint8Array([20,21,22,20,22,23])],t}(x);const S=_;var C=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const A=function(e){function t(t,n){var r=e.call(this)||this;if(r.textures=t,n){var o=n.pitch,i=n.yaw;o&&(r.pitch=o),i&&(r.yaw=i)}return r}return C(t,e),Object.defineProperty(t,"verticeTexIndices",{get:function(){for(var e,n,r,o,i,a,s,c,u=[],f=[],l=[],h=0;h<=t.sections;h++){e=h*Math.PI/t.sections,n=Math.sin(e),r=Math.cos(e);for(var p=0;p<=t.sections;p++)o=2*p*Math.PI/t.sections,i=Math.sin(o),a=Math.cos(o),u.push(i*n,r,a*n),f.push(p/t.sections,(t.sections-h)/t.sections),h<t.sections&&p<t.sections&&(c=(s=h*(t.sections+1)+p)+(t.sections+1),l.push(s,c,s+1,s+1,c,c+1))}var d=new Float32Array(u),g=new Uint32Array(l);return{vertices:d,texs:new Float32Array(f),indices:g}},enumerable:!1,configurable:!0}),t.initTexture=function(e,t){var n=e.createTexture();if(!n)throw new Error("创建纹理对象失败");e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var r=e.getUniformLocation(e.program,"u_Sampler");if(!r)throw new Error("获取 u_Sampler 地址失败");e.uniform1i(r,0)},t.prototype.drawModel=function(){var e=t.verticeTexIndices.indices,n=this.pano.gl,r=n.createBuffer();if(!r)throw new Error("创建索引缓冲区对象失败");if(n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),!n.getExtension("OES_element_index_uint"))throw new Error("不支持大于 gl.UNSIGNED_BYTE 的 type");n.drawElements(n.TRIANGLES,e.length,n.UNSIGNED_INT,0)},t.prototype.loadTextures=function(){return"string"==typeof this.textures?function(e){return f(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return h[e]?[2,h[e]]:[4,u(e)];case 1:return[2,t.sent()]}}))}))}(this.textures):Promise.resolve(this.textures)},t.prototype.replaceTextures=function(e){this.textures=e,this.render(this.pano)},t.prototype.render=function(n){var r=this;e.prototype.render.call(this,n);var o=this.pano.gl,i=t.verticeTexIndices,a=i.vertices,s=i.texs;c(o,a,3,o.FLOAT,"a_Position"),c(o,s,2,o.FLOAT,"a_TexCoord"),this.loadTextures().then((function(e){t.initTexture(o,e),r.draw()}))},t.sections=60,t}(x),R=function(){function e(e,n){var r=this;this.scenes=[],this.sceneIndex=0,this.rendered=!1,this.sceneChangeCallbacks=[],this.switchScene=function(e){if(e!==r.sceneIndex){var t=r.scenes[r.sceneIndex];t&&t.destroy(),r.sceneIndex=e,r.render(),r.sceneChangeCallbacks.forEach((function(e){e(r.scenes[r.sceneIndex],r.sceneIndex)}))}};var i=document.getElementById(e);if(!i)throw new Error("找不到容器，请确认 id 是否正确");this.container=i;var a=document.createElement("canvas");this.canvas=a,i.append(a),this.gl=function(e,n){var r=t(e,{antialias:!0});if(!r)throw new Error("创建 WebGL 上下文失败");return n&&(r=o.makeDebugContext(r)),r}(a,n),this.setStyle(),this.onContainerResize()}return e.prototype.initShader=function(){var t=this.scenes[this.sceneIndex];if(t instanceof S)e.CubeGLProgram||(e.CubeGLProgram=a(this.gl,"attribute vec4 a_Position;\nattribute vec2 a_TexCoord;\nvarying vec2 v_TexCoord;\nuniform mat4 u_MvpMatrix;\n\nvoid main() {\n    gl_Position = u_MvpMatrix * a_Position;\n    v_TexCoord = a_TexCoord;\n}\n","precision mediump float;\n\nuniform sampler2D f_Sampler;\nuniform sampler2D r_Sampler;\nuniform sampler2D u_Sampler;\nuniform sampler2D l_Sampler;\nuniform sampler2D d_Sampler;\nuniform sampler2D b_Sampler;\nvarying vec2 v_TexCoord;\n// 标记每个面 0-f 1-r 2-u 3-l 4-d 5-b\nuniform int u_Face;\n\nvoid main() {\n    if (u_Face == 0) {\n        gl_FragColor = texture2D(f_Sampler, v_TexCoord);\n    } else if (u_Face == 1) {\n        gl_FragColor = texture2D(r_Sampler, v_TexCoord);\n    } else if (u_Face == 2) {\n        gl_FragColor = texture2D(u_Sampler, v_TexCoord);\n    } else if (u_Face == 3) {\n        gl_FragColor = texture2D(l_Sampler, v_TexCoord);\n    } else if (u_Face == 4) {\n        gl_FragColor = texture2D(d_Sampler, v_TexCoord);\n    } else {\n        gl_FragColor = texture2D(b_Sampler, v_TexCoord);\n    }\n}\n")),i(this.gl,e.CubeGLProgram);else{if(!(t instanceof A))throw new Error("当前场景非法");e.SphereGLProgram||(e.SphereGLProgram=a(this.gl,"attribute vec4 a_Position;\nattribute vec2 a_TexCoord;\nvarying vec2 v_TexCoord;\nuniform mat4 u_MvpMatrix;\n\nvoid main() {\n    gl_Position = u_MvpMatrix * a_Position;\n    v_TexCoord = a_TexCoord;\n}\n","precision mediump float;\n\nuniform sampler2D u_Sampler;\nvarying vec2 v_TexCoord;\n\nvoid main() {\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord);\n}\n")),i(this.gl,e.SphereGLProgram)}},e.prototype.setStyle=function(){var e=this.container,t=this.canvas;e.style.overflow="hidden";var n=e.style.position;"absolute"!==n&&"fixed"!==n&&(e.style.position="relative");var r=e.offsetWidth,o=e.offsetHeight,i=window.devicePixelRatio||1;t.width=r*i,t.height=o*i,t.style.width=r+"px",t.style.height=o+"px",this.gl.viewport(0,0,t.width,t.height),t.style.cursor="grab"},e.prototype.onContainerResize=function(){var e=this;ResizeObserver&&new ResizeObserver((function(){e.rendered&&(e.setStyle(),e.render())})).observe(this.container)},e.prototype.addListener=function(e,t){"sceneChange"===e&&this.sceneChangeCallbacks.push(t)},e.prototype.removeListener=function(e,t){"sceneChange"===e&&(this.sceneChangeCallbacks=this.sceneChangeCallbacks.filter((function(e){return e!==t})))},e.prototype.removeAllListeners=function(){this.sceneChangeCallbacks=[]},e.prototype.addScene=function(e){this.scenes.push(e)},e.prototype.render=function(){var e=this,t=function(){var t=e.scenes[e.sceneIndex];if(!t)throw new Error("当前场景不存在");e.initShader();var n=e.gl;n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),t.render(e),e.rendered=!0};this.rendered?t():function(e){return f(this,void 0,void 0,(function(){var t,n,r,o,i,a;return l(this,(function(s){switch(s.label){case 0:return(t=e.scenes).length>0?[4,(c=t[0],p(d(c)))]:[3,2];case 1:s.sent(),s.label=2;case 2:return t.length>1&&(n=[],(r=t[0].hotSpots).length>0&&(n=r.map((function(e){return e.target}))),o=[],n.forEach((function(e){var n=t[e];n&&(o=o.concat(d(n)))})),p(o),i=n.concat([0]),a=[],t.forEach((function(e,n){if(!i.includes(n)){var r=t[n];r&&(a=a.concat(d(r)))}})),p(a)),[2]}var c}))}))}(this).then(t)},e.prototype.getCurrentScene=function(){return this.scenes[this.sceneIndex]},e.prototype.setScene=function(e){if("number"==typeof e){if(e<0||e>this.scenes.length-1)throw new Error("场景索引超出范围");this.switchScene(e)}else{var t=this.scenes.indexOf(e);if(-1===t)throw new Error("场景不存在");this.switchScene(t)}},e}(),P=function(){function e(e,t){void 0===t&&(t={});var n=t.pitch,r=void 0===n?0:n,o=t.yaw,i=void 0===o?0:o,a=t.target;e.style.position="absolute",e.style.cursor="pointer",this.dom=e,this.pitch=r,this.yaw=i,this.target=a,this.originOnClick=e.onclick}return e.prototype.render=function(e,t,n,r){var o=this;this.pano=n,this.scene=r;var i=this.pano.container;(this.target||0===this.target)&&(this.dom.onclick=function(e){o.scene.onHotSpotClick(o),o.originOnClick&&o.originOnClick(e)}),i.append(this.dom);var a=this.dom.getBoundingClientRect(),s=a.width,c=a.height,u=(i.offsetWidth-s)/2,f=(i.offsetHeight-c)/2,l=i.offsetWidth,h=i.offsetHeight;this.pitch+=e,this.yaw-=t;var p,d=Math.tan(E(Math.abs(this.pitch)))*(i.offsetHeight/2)*1.5,g=this.pitch>0?f-d:f+d;this.dom.style.top=g+"px",this.yaw=y(this.yaw),p=this.yaw>=0&&this.yaw<90?Math.tan(E(this.yaw)):this.yaw>270?-Math.tan(E(360-this.yaw)):4,p*=i.offsetWidth/2*(h/l)*1.5,this.dom.style.left=u+p+"px"},e.prototype.destroy=function(){this.pano.container&&this.pano.container.removeChild(this.dom)},e}();var F=n(840),L=n(55),I=n(96),B=n(389),U=n(524),D=n(196),M=n(637),k=n(932),O=n(738),N=n(878),G=n(54),W=n(108),X=n(623),j=n(19),H=n(28),Y=n(624),z=n(347),K=n(113),V=n(137),q=n(340);function $(e){var t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.justifyContent="center",t.style.alignItems="center",t.style.backgroundColor="rgba(0, 0, 0, 0.2)",t.style.borderRadius="10px",t.style.padding="0 8px 10px";var n=document.createElement("img");if(n.src=q,n.style.objectFit="contain",n.style.width="40px",n.style.height="40px",t.appendChild(n),e){var r=document.createElement("span");r.style.fontSize="12px",r.style.color="#ffffff",r.style.marginTop="6px",r.innerText=e,t.appendChild(r)}return t}window.onload=function(){var e=new R("containerId",!0),t=new S([O,G,W,N,k,M],{yaw:50,pitch:-20}),n=new P($("卫生间"),{pitch:-10,yaw:55,target:1}),r=$("看精装");r.onclick=function(){return e.setScene(2)};var o=new P(r,{pitch:-10,yaw:0});t.addHotSpots([n,o]);var i=new S([H,z,K,Y,j,X],{yaw:200,pitch:-30}),a=new P($("主卧"),{pitch:-10,yaw:10,target:0});i.addHotSpots(a);var s,c=new A(V,{yaw:80,pitch:10}),u=new P($("回简装"),{pitch:-10,yaw:80,target:0});c.addHotSpots(u),e.addScene(t),e.addScene(i),e.addScene(c),e.render(),s=[I,U,D,B,L,F],Promise.all(s.map((function(e){return function(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.src=e}))}(e)}))).then((function(e){return t.replaceTextures(e)})),document.getElementById("getCurrentScene").onclick=function(){var n=e.getCurrentScene();n===t?alert("房间"):n===i?alert("洗手间"):n===c?alert("精装房间"):alert("没有当前场景")},document.getElementById("setScene1").onclick=function(){e.setScene(0)},document.getElementById("setScene2").onclick=function(){e.setScene(i)},document.getElementById("setScene3").onclick=function(){e.setScene(2)};var f=function(e,t){document.getElementById("showCurrentScene").innerText="当前场景：第"+(t+1)+"个场景"};document.getElementById("addListener").onclick=function(){e.addListener("sceneChange",f),document.getElementById("showCurrentScene").innerText="切换后显示当前场景"},document.getElementById("removeListener").onclick=function(){e.removeListener("sceneChange",f),document.getElementById("showCurrentScene").innerText="当前场景："},document.getElementById("getAngle").onclick=function(){var t=e.getCurrentScene().getAngle();alert("pitch: "+t.pitch.toFixed(2)+"；yaw: "+t.yaw.toFixed(2))},document.getElementById("setAngle").onclick=function(){e.getCurrentScene().setAngle({pitch:30,yaw:45})},document.getElementById("setAngleAnim").onclick=function(){e.getCurrentScene().setAngle({pitch:30,yaw:45},{animation:!0})},document.getElementById("getFovy").onclick=function(){var t=e.getCurrentScene();alert("fovy: "+t.getFovy().toFixed(2))},document.getElementById("setFovy").onclick=function(){e.getCurrentScene().setFovy(80)},document.getElementById("setFovyAnim").onclick=function(){e.getCurrentScene().setFovy(80,{animation:!0})};var l=function(e){document.getElementById("showCurrentAngle").innerText="pitch："+e.pitch.toFixed(2)+"；yaw："+e.yaw.toFixed(2)};document.getElementById("addAngleListener").onclick=function(){t.addListener("angleChange",l),i.addListener("angleChange",l),c.addListener("angleChange",l),document.getElementById("showCurrentAngle").innerText="移动切换后显示角度"},document.getElementById("removeAngleListener").onclick=function(){t.removeListener("angleChange",l),i.removeListener("angleChange",l),c.removeListener("angleChange",l),document.getElementById("showCurrentAngle").innerText="当前角度："}}})()})();
//# sourceMappingURL=main.334f3dbf5060e4c98624.js.map